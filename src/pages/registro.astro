---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Registro PTI's">
  <div id="formContainer" class="w-full max-w-lg p-8 mt-20 content-between">
    <!-- Progress bar -->
    <div class="flex justify-between mb-6">
      <div class="w-1/3 h-2 bg-gray-300 rounded-full step progress-step"></div>
      <div class="w-1/3 h-2 bg-gray-300 rounded-full step progress-step"></div>
      <div class="w-1/3 h-2 bg-gray-300 rounded-full step progress-step"></div>
    </div>

    <!-- Step 1: Personal Information -->
    <div class="step-content active">
      <h2 class="text-2xl font-semibold text-gray-700 mb-4">
        Paso 1: Personal Information
      </h2>
      <label for="fname" class="block text-gray-600">Deposito</label>
      <input
        type="text"
        id="fname"
        placeholder="Enter your first name"
        class="w-full px-3 py-2 mb-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
      />

      <label for="lname" class="block text-gray-600">Fecha del PTI</label>
      <input
        type="text"
        id="lname"
        placeholder="Enter your last name"
        class="w-full px-3 py-2 mb-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
      />
      <label for="lname" class="block text-gray-600">Linea marítima</label>
      <input
        type="text"
        id="lname"
        placeholder="Enter your last name"
        class="w-full px-3 py-2 mb-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
      />
      <label for="lname" class="block text-gray-600"
        >Colocar etiqueta del PTI indicando fecha</label
      >
      <input
        type="text"
        id="lname"
        placeholder="Enter your last name"
        class="w-full px-3 py-2 mb-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
      />
      <label for="lname" class="block text-gray-600"
        >Número del contenedor</label
      >
      <input
        type="text"
        id="lname"
        placeholder="Enter your last name"
        class="w-full px-3 py-2 mb-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
      />
      <label for="lname" class="block text-gray-600">Tipo de maquinaria</label>
      <input
        type="text"
        id="lname"
        placeholder="Enter your last name"
        class="w-full px-3 py-2 mb-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
      />
      <div class="flex gap-2">
        <div>
          <label for="lname" class="block text-gray-600"
            >Nro. modelo de unidad</label
          >
          <input
            type="text"
            id="lname"
            placeholder="Enter your last name"
            class="w-full px-3 py-2 mb-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
          />
        </div>
        <div>
          <label for="lname" class="block text-gray-600"
            >Año de fabricación</label
          >
          <input
            type="text"
            id="lname"
            placeholder="Enter your last name"
            class="w-full px-3 py-2 mb-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
          />
        </div>
      </div>
      <label for="lname" class="block text-gray-600"
        >Número de serie de unidad</label
      >
      <input
        type="text"
        id="lname"
        placeholder="Enter your last name"
        class="w-full px-3 py-2 mb-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
      />
    </div>

    <!-- Step 2: Contact Information -->
    <div class="step-content hidden">
      <h2 class="text-2xl font-semibold text-gray-700 mb-4">
        Paso 2: Inspección visual de la unidad
      </h2>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Impactos de covers y paneles de maquinaria</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Pernos de montaje de la unidad</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Montaje del compresor, motor ventilador y ventilador</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Protector del compresor</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Paneles de accesor al motor evaporado</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Ventilador de aire fresco</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Panel de acceso a los calentadores</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Puerta caja de control & empaques</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Rejilla del ventilador del condensador</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Parte baja y puerta de caja</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
    </div>

    <!-- Step 3: Account Setup -->
    <div class="step-content hidden">
      <h2 class="text-2xl font-semibold text-gray-700 mb-4">
        Paso 3: Inspección eléctrica
      </h2>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Cable de energía y enchufe</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>

      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600">Rompe circuito</label>
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Cables y conectores</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600">Contactores</label>
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
      <div class="flex justify-between gap-4">
        <label for="email" class="block text-gray-600"
          >Interruptores de seguridad</label
        >
        <input type="checkbox" class="h-6 w-6 px-3 py-2 mb-4 border" />
      </div>
    </div>

    <!-- Navigation Buttons -->
    <div class="absolute bottom-0 left-0 right-0 m-8">
      <div class="flex justify-between">
        <button
          id="prevBtn"
          class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 disabled:opacity-50"
          disabled>Anterior</button
        >
        <button
          id="nextBtn"
          class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"
          >Siguiente</button
        >
      </div>
    </div>
  </div>

  <!-- Script generado por TypeScript -->
</Layout>
<script>
  // Obtener los elementos del DOM
  const steps = document.querySelectorAll<HTMLElement>(".step-content");
  const progressSteps =
    document.querySelectorAll<HTMLElement>(".progress-step");
  const prevBtn = document.getElementById("prevBtn") as HTMLButtonElement;
  const nextBtn = document.getElementById("nextBtn") as HTMLButtonElement;
  const formContainer = document.getElementById("formContainer") as HTMLElement;

  let currentStep = 0;

  // Mostrar el paso actual
  function showStep(stepIndex: number): void {
    // Mostrar el paso actual y ocultar los demás
    steps.forEach((step, index) => {
      step.classList.toggle("hidden", index !== stepIndex);
      step.classList.toggle("active", index === stepIndex);
    });

    // Actualizar la barra de progreso
    progressSteps.forEach((progress, index) => {
      progress.classList.toggle("bg-blue-500", index <= stepIndex);
      progress.classList.toggle("bg-gray-300", index > stepIndex);
    });

    // Deshabilitar/activar los botones de navegación
    prevBtn.disabled = stepIndex === 0;
    nextBtn.textContent =
      stepIndex === steps.length - 1 ? "Registrar" : "Siguiente";
  }

  // Manejar el clic en los botones de siguiente/anterior
  function nextPrev(stepChange: number): void {
    currentStep += stepChange;

    if (currentStep >= steps.length) {
      formContainer.innerHTML =
        "<h2 class='text-2xl font-semibold text-gray-700 mb-4 text-center'>Registro completado!</h2>";
      setTimeout(() => {
        window.location.href = "/registro";
      }, 2000);
      return;
    }

    showStep(currentStep);
  }

  // Inicializar la visualización del formulario
  prevBtn.addEventListener("click", () => nextPrev(-1));
  nextBtn.addEventListener("click", () => nextPrev(1));

  // Mostrar el primer paso
  showStep(currentStep);
</script>
